

## 일반 모듈 vs 프로세스 (GenServer) 선택 기준

아래 질문 중 하나라도 "예"라는 답이 나오면 **프로세스(GenServer) 사용을 적극적으로 고려**해야 합니다.

### 1. 상태(State)를 관리해야 하는가?
모듈이 호출될 때마다 사라지는 정보가 아니라, **지속적으로 유지하고 변경해야 할 데이터**가 있나요?

> * **프로세스가 필요한 예시**: API 요청 횟수 카운터, 데이터 캐시, 웹소켓 커넥션 정보 등.
> * **현재 프로젝트의 경우**: 각 함수 호출은 독립적이며 이전 호출 내용을 기억할 필요가 없으므로 **상태가 없습니다.**

### 2. 동시성 또는 비동기 작업이 필요한가?
오래 걸리는 작업을 **백그라운드에서 처리**하여 현재 진행 중인 다른 작업(예: 웹 요청 처리)을 막지 않아야 하나요?

> * **프로세스가 필요한 예시**: 사용자가 회원가입 버튼을 누르면 즉시 "가입 완료" 응답을 주고, 환영 이메일은 백그라운드에서 천천히 보낼 때.
> * **현재 프로젝트의 경우**: 현재는 동기(Synchronous) 방식입니다. 만약 알림 수만 건을 보내 웹 요청이 타임아웃될 수 있다면, 프로세스에게 작업을 위임하고 즉시 응답하는 **비동기(Asynchronous)** 방식이 필요합니다.

### 3. 작업의 속도를 제어하거나 직렬화해야 하는가?
외부 API의 **요청 제한(Rate Limiting)** 때문에 "1초에 10개씩만 보내기" 같은 제어가 필요한가요? 또는 여러 곳에서 동시에 요청하더라도 반드시 하나씩 순서대로 처리해야 하나요?

> * **프로세스가 필요한 예시**: 외부 결제 API 호출, 선착순 이벤트 처리.
> * **현재 프로젝트의 경우**: 현재는 속도 제어 없이 모든 데이터를 한 번에 보냅니다. 만약 API 제약이 있다면, GenServer가 작업 큐(Queue) 역할을 하며 **속도를 조절**할 수 있습니다.

### 4. 내고장성(Fault Tolerance)이 중요한가?
해당 작업에 문제가 생겼을 때, OTP의 감독(Supervision) 기능을 통해 **자동으로 재시작**하는 등의 조치가 필요한가요?

> * **프로세스가 필요한 예시**: 항상 살아있어야 하는 실시간 데이터 수집기.
> * **현재 프로젝트의 경우**: 일회성 작업이라 실패하면 호출한 쪽에서 에러를 처리하는 것으로 충분합니다.

---

## 요약: 장단점 비교

| 구분         | 일반 모듈 (Plain Module)    | 프로세스 (GenServer)              |
| :--------- | :---------------------- | :---------------------------- |
| **개념**     | 🛠️ **도구 상자** (함수 모음)   | 👨‍🏭 **전담 직원** (독립된 작업자)     |
| **장점**     | **간단함**, 예측 가능, 오버헤드 없음 | **상태 관리**, **동시성/비동기**, 내고장성  |
| **단점**     | 상태 유지 불가, 동시 작업 처리 복잡   | 약간의 오버헤드, 상대적으로 복잡함           |
| **언제 사용?** | 상태가 필요 없는 순수한 데이터 변환/처리 | 상태 관리, 백그라운드 작업, 작업 제어가 필요할 때 |

---

## 최종 설계 조언

1.  **현재는 일반 모듈로 유지하세요.**
    * 가장 간단하고 명확한 방법이며, 현재 요구사항에 완벽하게 부합합니다.
    * 필요 이상의 복잡성을 미리 도입하지 마세요. (YAGNI - You Ain't Gonna Need It)

2.  **프로세스로 전환해야 할 시점을 알아두세요.**
    * 나중에 아래와 같은 요구사항이 생겼을 때 `GenServer`로 리팩토링하는 것을 고려합니다.
        * **대용량 처리**: "알림을 수만 건씩 보내야 해서 너무 오래 걸려요. 일단 요청은 바로 응답 처리하고, 알림은 **백그라운드에서 보내주세요.**"
        * **속도 제어**: "외부 API에서 **초당 100개까지만** 요청을 받겠다고 합니다. 속도를 조절해주세요."
        * **상태 추적**: "어떤 알림이 성공했고 실패했는지 **전체 진행 상황을 추적**하고 싶어요."